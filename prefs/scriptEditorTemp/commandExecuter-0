
import sys, os
import imp
import importlib
import maya.cmds as cmds
#import os

Dir 			= "/Volumes/SSD/Work/Chimera/Chimera_art/Tech_Art/3DTools/"

SubFolders      = ["CharSetUp","AnimTools"]
FileType        = ".py"

def psource(ModuleDir,FileName):
    # Check if dirrectory is really a directory

    if( os.path.exists( ModuleDir) ):
        # Check if the file directory already exists in the sys.path array
        paths = sys.path
        pathfound = 0
        for path in paths:
            if(ModuleDir == path):
                pathfound = 1
    # If the dirrectory is not part of sys.path add it
        if not pathfound:
            sys.path.append( ModuleDir )
            print "Added Path to sys Path... "
            print ModuleDir

    # exec works like MEL's eval but you need to add in globals()
    # at the end to make sure the file is imported into the global
    # namespace else it will only be in the scope of this function
    
    print FileName
    exec ('import ' + FileName ) in globals()
    exec ( 'imp.reload( ' + FileName + ' )' ) in globals()
    #exec ('from ' + FileName + ' import *') in globals()
    
    
    print "imported/reloaded..."
    print "---->>" + FileName
    # This returns the namespace of the file imported
    return FileName

def LOADMY_PlugIns():
	bit				= "32"
	Version 		= cmds.about(version=True)
	mac				= cmds.about(mac=True)
	Maya2016Ext 	= "2016 Extension 2"
	Suffix			= "mll"
	if (Maya2016Ext == Version):
		Version 	= "2016.5"
	if (cmds.about(x64=True)):
		bit 		= "64"
	DirSuffix       = "_" + bit + "bit/"
	if Version == "2018":
	    DirSuffix = "/"
	PluginDir 	    = "AnimSchoolPickerPC/" + Version + DirSuffix
		
	if (mac):
		PluginDir 	= "AnimSchoolPickerMac/maya" + Version + "/"	
		Suffix		= "bundle"	
	PluginName 	= "AnimSchoolPicker." + Suffix
	MyPlugin		= Dir + PluginDir + PluginName
	import os.path
	if os.path.exists(MyPlugin):
		cmds.loadPlugin( MyPlugin )
	else:
		print " Anim School Picker not found, guessing that we don't have a current version for this maya " + Version + " " + bit + " Version"
		print " We looked here : ", MyPlugin


for Folder in SubFolders:
	# When you import a file you must give it the full path
	for root, dirs, files in os.walk(Dir + Folder + "/"):
	    for file in files:
	        if file.endswith(FileType):
	            FileName = os.path.splitext(file)[0] 
	            psource(root,FileName)

sys.path.append(Dir)
LOADMY_PlugIns()
UI.CharSetUp_UI()



